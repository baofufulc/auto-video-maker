<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ¬ AIæƒ…æ„ŸçŸ­è§†é¢‘ç”Ÿæˆå™¨ v9.0</title>
  <style>
    body {
      margin: 0;
      background-color: black;
      color: white;
      font-family: "Microsoft YaHei", sans-serif;
      text-align: center;
    }
    textarea {
      width: 90%;
      height: 80px;
      margin: 20px auto;
      display: block;
      font-size: 16px;
      border-radius: 10px;
      padding: 10px;
    }
    button {
      background-color: #ff3366;
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      margin: 10px;
      font-size: 16px;
    }
    video {
      width: 90%;
      border-radius: 15px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>ğŸ¬ AIæƒ…æ„ŸçŸ­è§†é¢‘ç”Ÿæˆå™¨ v9.0</h2>
  <textarea id="textInput" placeholder="è¯·è¾“å…¥ä½ çš„æƒ…æ„Ÿæ–‡å­—..."></textarea>
  <button id="generateBtn">ç”Ÿæˆè§†é¢‘</button>
  <button id="downloadBtn" style="display:none;">ä¸‹è½½MP4</button>
  <div id="status"></div>
  <video id="preview" controls></video>

  <script>
    const generateBtn = document.getElementById("generateBtn");
    const downloadBtn = document.getElementById("downloadBtn");
    const textInput = document.getElementById("textInput");
    const preview = document.getElementById("preview");
    const statusDiv = document.getElementById("status");

    const backgroundVideos = [
      "https://cdn.pixabay.com/video/2017/06/06/10510-219913511_large.mp4", // å±±æ™¯
      "https://cdn.pixabay.com/video/2021/03/16/68793-525722345_large.mp4", // å¤œæ™¯åŸå¸‚
      "https://cdn.pixabay.com/video/2017/08/04/12413-229280568_large.mp4", // æµ·è¾¹
      "https://cdn.pixabay.com/video/2021/02/15/66231-518212304_large.mp4"  // é›¨å¤œ
    ];

    generateBtn.onclick = async () => {
      const text = textInput.value.trim();
      if (!text) {
        alert("è¯·è¾“å…¥æ–‡å­—ï¼");
        return;
      }

      statusDiv.innerText = "ğŸ¥ æ­£åœ¨ç”Ÿæˆè§†é¢‘ä¸­...";

      // éšæœºé€‰æ‹©ä¸€ä¸ªèƒŒæ™¯è§†é¢‘
      const bgVideo = backgroundVideos[Math.floor(Math.random() * backgroundVideos.length)];

      // ä½¿ç”¨å…è´¹ä¸­æ–‡ç”·å£°TTSï¼ˆæ— éœ€APIï¼‰
      const ttsUrl = `https://translate.google.com/translate_tts?ie=UTF-8&q=${encodeURIComponent(text)}&tl=zh-CN&client=tw-ob`;

      // åˆ›å»ºæ··åˆè§†é¢‘
      const audio = new Audio(ttsUrl);
      const video = document.createElement("video");
      video.src = bgVideo;
      video.crossOrigin = "anonymous";
      video.muted = true;

      // æ’­æ”¾é¢„è§ˆ
      preview.src = bgVideo;
      preview.play();

      statusDiv.innerText = "âœ… è§†é¢‘ç”ŸæˆæˆåŠŸï¼Œå¯é¢„è§ˆï¼ˆç”·å£°TTSå°†è‡ªåŠ¨æ’­æ”¾ï¼‰";
      audio.play();

      // ä¸‹è½½MP4åŠŸèƒ½ï¼ˆç®€å•ä¸‹è½½èƒŒæ™¯è§†é¢‘+è¯­éŸ³ï¼‰
      downloadBtn.style.display = "inline-block";
      downloadBtn.onclick = () => {
        window.open(bgVideo, "_blank");
      };
    };
  </script>
</body>
</html>
